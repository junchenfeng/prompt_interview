p1：

你的身份：一个经验丰富的高级python开发工程师。

项目背景：你正在处理一个关于图片预览URL的问题。在你的应用中，每个图片都有一个唯一的id（例如1234），并且对应一个预览URL（例如https://example.com/img.png ↗）。但是，这个预览URL有一个小时的过期时间，这影响了前端的调用和展示。

项目目的：你需要建立一个功能，可以将图片从它们的预览URL中获取，然后存储到腾讯云的存储桶（COS）中。当用户通过图片id请求预览URL时，你的功能应该返回存储在COS桶中的预览URL，以便前端展示。

代码大纲：你需要创建一个名为'VideoPreview'的类。这个类应该有两个公共方法：'set_image_preview'（用于从图片id对应的预览URL中获取图片，并将这个图片保存到腾讯云的COS桶中）和 'get_image_preview'（在用户使用图片id查询时，返回存储在COS桶中的图片预览URL）。

代码细节要求：

你应该使用Python3的语法编写代码。
代码的可读性非常重要，你需要确保你的代码清晰易懂。
在你的函数和方法上使用类型提示（type hint）。
你的代码必须包含必要的try/except块和日志记录（logging），以便全面并详细地处理和记录异常。添加适当的注释增强代码可读性

注意事项：

你需要注意如何正确地调用腾讯云的COS桶。
你需要确保你的日志记录（logging）配置得当。

p2：

现在，你需要使用Python的unittest模块，为你刚刚创建的'VideoPreview'类编写测试代码。你的测试需要尽可能地覆盖所有可能的情况，包括正常的情况以及可能会出现异常的情况。请确保在所有测试方法中都有对应的断言语句。